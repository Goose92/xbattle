<!DOCTYPE html>
<head>
    <title>Hex</title>
    <script src="hexagon.js"></script>
</head>
<body>
<canvas id="HexCanvas" width="1000" height="700"></canvas>
<script>

    const TailleGrilleRows=3;
    const TailleGrilleCols=3;
    const NiveauMax=30;

    var Case = {
        Niveau: 50,
        Proprietaire:0,
        Altitude:1,
        HD: false,
        H : false,
        HG:true,
        BG:false,
        B:false,
        BD:false
    };

    // Initialisation du tableau du jeu
    var TableauGrille = new Array(TailleGrilleCols);
    for (var i = 0; i < TailleGrilleCols; i++)
    {
        TableauGrille[i] = new Array(TailleGrilleRows);
        for (var j=0;j<TailleGrilleRows;j++)
        {
            var Case = new Object();
            Case.Niveau = Math.floor(Math.random() * 100);
            Case.Proprietaire = 0;
            Case.Altitude=1;
            Case.HD =true;
            Case.H = true;
            Case.HG=true;
            Case.BG=true;
            Case.B=true;
            Case.BD=true;

            TableauGrille[i][j] = Case;
            TableauGrille[i][j].Niveau=Math.floor(Math.random() * 100);
        }
    }

    var hexagonGrid = new HexagonGrid("HexCanvas", 50);
    hexagonGrid.affichageCasesGrille(TailleGrilleRows, TailleGrilleCols, 20, 20);

    function principale(){
        setTimeout(principale,100); /* rappel aprÃ¨s 2 secondes = 2000 millisecondes */
        for (var i = 0; i < TailleGrilleCols; i++)
        {
            for (var j=0;j<TailleGrilleRows;j++)
            {
                //console.log("analyse",i,j);
                if ( TableauGrille[i][j].Niveau >=100 ){
                    TableauGrille[i][j].Niveau = Math.floor(Math.random() * 100);
                    hexagonGrid.affichageCase(i,j, 20,20);
                    hexagonGrid.affichageNiveauCase(i,j, 20, 20);
                    hexagonGrid.affichageValveCase(i,j, 20, 20);
                }
                else {
                    TableauGrille[i][j].Niveau = TableauGrille[i][j].Niveau + 1;
                    hexagonGrid.affichageCase(i,j, 20,20);
                    hexagonGrid.affichageNiveauCase(i,j, 20, 20);
                    hexagonGrid.affichageValveCase(i,j, 20, 20);
                }
            }
        }
        //hexagonGrid.affichageCasesGrille(TailleGrilleRows, TailleGrilleCols, 20, 20);
        //hexagonGrid.affichageNiveauGrille( TailleGrilleRows, TailleGrilleCols,20, 20);
    }
    principale();
</script>

</body>

